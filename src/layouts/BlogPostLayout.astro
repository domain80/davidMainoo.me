---
import BaseLayout from './BaseLayout.astro';
import PostMetadata from '../components/blog/PostMetadata.astro';
import TableOfContents from '../components/blog/TableOfContents.astro';
import ShareButtons from '../components/ui/ShareButtons.astro';
import ThemeToggle from '../components/ui/ThemeToggle.astro';
import Footer from '../components/layout/Footer.astro';

interface Props {
  title: string;
  description: string;
  author: string;
  authorAvatar?: string;
  pubDate: Date;
  updatedDate?: Date;
  category: string;
  headings: any[];
  slug: string;
}

const { title, description, author, authorAvatar, pubDate, updatedDate, category, headings, slug } = Astro.props;
---

<BaseLayout title={title} description={description}>
  <div class="min-h-screen flex flex-col">
    <!-- Brand/Domain at top -->
    <header class="py-6 px-6 border-b border-gray-200 dark:border-gray-800">
      <div class="max-w-5xl mx-auto flex items-center justify-between">
        <a
          href="/"
          class="text-sm text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-100 transition-colors"
        >
          Domain80
        </a>
        <ThemeToggle />
      </div>
    </header>

    <div class="max-w-5xl mx-auto px-6 py-12 flex-1">
    <div class="grid grid-cols-1 lg:grid-cols-[1fr_250px] gap-12">
      <!-- Main Content -->
      <article class="max-w-2xl">
        <!-- Category Badge -->
        <span class="inline-block px-3 py-1 text-xs font-medium bg-accent/10 text-accent rounded-full mb-4">
          {category}
        </span>

        <!-- Title -->
        <h1 class="text-4xl md:text-5xl font-bold mb-6 text-gray-900 dark:text-gray-100 leading-tight">
          {title}
        </h1>

        <!-- Metadata -->
        <PostMetadata
          author={author}
          authorAvatar={authorAvatar}
          pubDate={pubDate}
          updatedDate={updatedDate}
        />

        <!-- Content -->
        <div class="prose prose-lg dark:prose-invert max-w-none mt-12">
          <slot />
        </div>
      </article>

      <!-- Sidebar (TOC + Engagement) -->
      {headings.length > 0 && (
        <aside class="hidden lg:block sticky top-8 h-fit space-y-8">
          <TableOfContents headings={headings} />

          <!-- Engagement -->
          <div class="pt-6 border-t border-gray-200 dark:border-gray-800">
            <ShareButtons title={title} url={Astro.url.href} />
          </div>
        </aside>
      )}
    </div>
    </div>

    <Footer />
  </div>
</BaseLayout>
