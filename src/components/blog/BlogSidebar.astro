---
import { Icon } from "astro-icon/components";
import Button from "../ui/Button.astro";
import ThemeToggle from "../ui/ThemeToggle.astro";

interface Props {
  allTags: { tag: string; count: number }[];
  totalPosts: number;
}

const { allTags, totalPosts } = Astro.props;
---

<div class="space-y-6">
  <!-- Back to Home -->
  <a
    href="/"
    class="inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-accent dark:hover:text-accent transition-colors mt-6"
  >
    <Icon name="tabler:arrow-left" class="w-4 h-4" />
    Home
  </a>

  <!-- Theme Toggle -->
  <ThemeToggle />
  <!-- Page Title -->
  <h1 class="text-5xl font-bold text-gray-900 dark:text-gray-100">All Posts</h1>

  <!-- CTA Buttons -->
  <div class="flex flex-wrap gap-3">
    <Button href="#" variant="outline">
      <Icon name="tabler:message-circle" class="w-4 h-4" />
      Let's talk
    </Button>
    <a
      href="/rss.xml"
      class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-amber-600 dark:text-amber-500 hover:text-amber-700 dark:hover:text-amber-400 transition-colors rounded-lg"
    >
      <Icon name="tabler:rss" class="w-4 h-4" />
      Subscribe via RSS
    </a>
  </div>

  <!-- Tag Filters -->
  <div class="pt-6 border-t border-gray-200 dark:border-gray-800">
    <div id="tag-list" class="flex flex-wrap gap-2">
      {
        allTags.map(({ tag, count }) => (
          <button
            type="button"
            data-tag={tag}
            data-active="false"
            class="px-3 py-1.5 text-xs rounded-full border-2 border-gray-300 dark:border-gray-800 bg-transparent text-gray-900 dark:text-gray-400 hover:bg-gray-100/50 dark:hover:bg-gray-800/50 transition-all cursor-pointer data-[active=true]:border-accent data-[active=true]:text-accent data-[active=true]:font-bold"
          >
            {tag}
          </button>
        ))
      }
    </div>
  </div>

  <!-- Search Input -->
  <div>
    <input
      type="text"
      id="blog-search"
      placeholder="Search..."
      class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white/50 dark:bg-gray-900/50 backdrop-blur-sm text-gray-900 dark:text-gray-100 placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 transition-colors"
    />
  </div>

  <!-- Pagination -->
  <nav class="flex items-center justify-between" aria-label="Pagination">
    <button
      id="prev-page"
      type="button"
      class="px-3 py-1.5 text-sm text-gray-700 dark:text-gray-300 hover:text-accent dark:hover:text-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
    >
      Previous
    </button>

    <div id="page-numbers" class="flex gap-2">
      <!-- Page numbers will be rendered by JavaScript -->
    </div>

    <button
      id="next-page"
      type="button"
      class="px-3 py-1.5 text-sm text-gray-700 dark:text-gray-300 hover:text-accent dark:hover:text-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
    >
      Next
    </button>
  </nav>

  <!-- Social Links and Resume -->
  <div class="pt-6 border-t border-gray-200 dark:border-gray-800 space-y-4">
    <div class="flex items-center gap-4">
      <a
        href="https://github.com/yourusername"
        target="_blank"
        rel="noopener noreferrer"
        class="text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors"
        aria-label="GitHub"
      >
        <Icon name="tabler:brand-github" class="w-6 h-6" />
      </a>
      <a
        href="https://linkedin.com/in/yourusername"
        target="_blank"
        rel="noopener noreferrer"
        class="text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors"
        aria-label="LinkedIn"
      >
        <Icon name="tabler:brand-linkedin" class="w-6 h-6" />
      </a>
    </div>

    <a
      href="/resume.pdf"
      class="inline-flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-accent dark:hover:text-accent transition-colors"
    >
      My resume →
    </a>
  </div>

  <!-- Copyright -->
  <p
    class="text-xs text-gray-500 dark:text-gray-500 pt-6 border-t border-gray-200 dark:border-gray-800"
  >
    © Copyright 2025, David Mainoo.
  </p>
</div>
